import com.rameses.annotations.*
import groovy.text.SimpleTemplateEngine

class FAASHtmlService
{

	@PersistenceContext('main')
	def em
	
	@Service('FAASService')
	def faasSvc
	
	@Service('NumberService')
	def numberSvc
	
	@ProxyMethod
	public def getHtml( faasid) {
        if( ! faasid) {
            return buildEmptyHtml()
        }
		def faas = faasSvc.open( faasid)
		return buildHtml(faas)
	}
	
	String buildHtml( faas ) {
		String html = ''
        html += '<html>'
        html += '<head></head>'
        html += '<body>'
        if( faas.message ) {
            html += '<h3>Comment : ' + faas.message + '</h3>'
        }
        html += ''
        html += '<h1>TD No.: ' +  faas.info.tdno + '</h1>'
        html += '<h3>PIN: ' +  faas.rpu.fullpin + '</h3>'
        html += '<h3>Type: ' +  faas.rpu.rputype + '</h3>'
        html += '</body>'
        html += '</html>'
        return html 
	}
    
    String buildEmptyHtml() {
        String html = ''
        html += '<html>'
        html += '<head></head>'
        html += '<body><h3>FAAS does not exists.</h3></body>'
        html += '</html>'
        return html 
    }
		
}
