<?xml version="1.0" encoding="UTF-8"?>
<workunit>
    
    <invokers>
        <invoker folderid="/menu/tc/txn" action="init" caption="Liquidations"/>
    </invokers>
    
    <code lang="groovy">
        <![CDATA[
        import com.rameses.rcp.common.*;
        import com.rameses.rcp.annotations.*;
        import com.rameses.osiris2.client.*;
        
        public class LiquidationListController {
        
            @Service("LiquidationService")
            def svc;
            
            def entity;
            
            def searchText;
            
            def mode;
            
            def list;
            
            def selectedItem;

            def listHandler = [

                getRows    : { return 50; },

                getColumns : {
                    return [
                        new Column( name:"txnno", caption:"Liq. No.", minWidth:60 ),
                        new Column( name:"liquidatingofficername", caption:"Liquidating Officer", width:350 ),
                        new Column( name:"txndate", caption:"Date", format: "yyyy-MM-dd", width:100 ),
                        new Column( name:"amount", caption:"Amount", format: "#,##0.00", width:140 )
                    ];
                },

                fetchList : { 
                    return svc.getList( searchText, it );
                }

            ] as PageListModel;
            
            def getOpener() {
                return new Opener( name:"tc2:liquidation", action:"preview", params:[entity:selectedItem] )
            }
            
            void search() {
                listHandler.load();
            }
            
            void init() {
                mode = 'view';
            }

        }
        
        
        ]]>
    </code>
    
    <pages>
        <page template="etracs2.tc.ListMgmtPage" />
    </pages>
</workunit>
