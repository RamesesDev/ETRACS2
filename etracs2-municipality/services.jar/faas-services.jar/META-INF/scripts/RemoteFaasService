import com.rameses.annotations.*;

public class RemoteFaasService {

	@Service("ETRACSIntegrationService")
	def integration;
	
	@Service("ETRACSUtilService")
	def util;
	
	@Service("Var")
	def var;
	
	@ProxyMethod
	@Async(type="topic")
	public void approve( domain, userName, faasId, txnType, tdNo, pin, issueDate	 ) {
		if ( util.acceptMsg( domain) ) {
			integration.approveTaxDeclaration( domain, userName, faasId, txnType, tdNo, pin, issueDate );
		}
	}
	
	@ProxyMethod
	@Async(type="topic")
	public void disapprove( domain, userName, faasId, remarks, disapprovedBy, disapprovedByTitle ) {
		println "DOMAIN -> $domain"
		if ( util.acceptMsg( domain) ) {
			integration.disapproveTaxDeclaration( domain, userName, faasId, remarks, disapprovedBy, disapprovedByTitle );
			println "RemoteFaasService.disapprove success..."
		}
	}
	
	@ProxyMethod
	public def findLedgerByTdId2( domain, params ) {
		if ( util.acceptMsg( domain ) ) {
			integration.invokeRPTService( params );
		}
		return null;
	}

}
