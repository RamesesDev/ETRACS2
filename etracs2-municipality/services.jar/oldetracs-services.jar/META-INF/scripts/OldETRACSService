import com.rameses.annotations.*;
import com.rameses.invoker.client.*;
import com.rameses.etracs1.invoker.*;

class OldETRACSService 
{

	@Service("Var")
	def var;
	
	@Service("FaasService")
	def faasSvc;
	
	@ProxyMethod
	public void approveTaxDeclaration( params ) {
		println "OldETRACSService:approveTaxDeclaration -> $params.tdNo";
		invokeRPTService("approveTaxDeclaration", [params]);
		faasSvc.approve( params.faasId, params.USERNAME, params.tdNo, params.pin, params.issueDate, params.approvedBy );
		println "OldETRACSService:approveTaxDeclaration successful...";
	}
	
	@ProxyMethod
	public def findLedgerByTdId2( params ) {
		return invokeRPTService( "findLedgerByTdId" , [ params.faasId ] );
	}
	
	private def invokeRPTService( methodName, params ) {
		return invokeService("remote/RemoteRPTService", methodName, params as Object[]);
	}

	private def invokeService( serviceName, methodName, params ) {
		def invoker = new HttpServiceInvoker( var.etracs_version1_host, null );
		def svc = invoker.create( serviceName );
		return svc.invoke( methodName, params );
	}
	
	
	
}
