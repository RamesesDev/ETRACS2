import com.rameses.annotations.*
import com.rameses.common.*
import java.rmi.server.UID

class BPSettingService
{	
	@PersistenceContext('main')
	def em
		
	def SCHEMANAME = 'bpsetting:bpsetting';
		
	@ProxyMethod
	public def getSetting(){
		def setting = em.read( SCHEMANAME, [objid:'DEFAULT'] );
		if( !setting ){
			setting = [objid:'DEFAULT'];
			setting.assessmentsignatories = [];
			setting.applicationsignatories = [];
			setting.requirements = [];
			setting.collection = [
				qtr1surcharge : [ month:1, day:20 ],
				qtr2surcharge : [ month:4, day:20 ],
				qtr3surcharge : [ month:7, day:20 ],
				qtr4surcharge : [ month:10, day:20 ],
				discount : [ month:1, day:10 ]
			];
			println "INSERTING......";
			em.create(SCHEMANAME, setting);
			println "DONE INSERTING......";
		}
		
		println em.read( SCHEMANAME, [objid:'DEFAULT'] );
		return setting;
	}
	
	@ProxyMethod
	public def save( def setting ){
		return em.update( SCHEMANAME, setting );
	}
}
